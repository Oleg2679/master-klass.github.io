<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ú–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å—ã –¥–ª—è –º–æ–ª–æ–¥—ë–∂–∏</title>
  <style>
    :root {
      --primary: #6a11cb;
      --accent: #ff4d94;
      --light: #f9f7fe;
      --dark: #222;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
    body {
      background: linear-gradient(135deg, #f5f7fa 0%, #e4edf9 100%);
      padding: 20px;
      color: var(--dark);
    }
    header {
      text-align: center;
      margin: 2rem 0;
    }
    h1 {
      font-size: 2.4rem;
      background: linear-gradient(to right, var(--primary), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      margin-bottom: 0.5rem;
    }
    .subtitle {
      color: #666;
      font-size: 1.1rem;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 24px;
      max-width: 1200px;
      margin: 0 auto;
    }
    .card {
      background: white;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.08);
      transition: transform 0.3s, box-shadow 0.3s;
      cursor: pointer;
    }
    .card:hover {
      transform: translateY(-6px);
      box-shadow: 0 10px 24px rgba(0,0,0,0.12);
    }
    .card h3 {
      color: var(--primary);
      margin-bottom: 12px;
    }
    .card .date-time {
      font-weight: 600;
      color: var(--accent);
      margin: 8px 0;
    }
    .card p {
      font-size: 0.95rem;
      color: #555;
      line-height: 1.5;
    }

    /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.6);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: white;
      padding: 30px;
      border-radius: 20px;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.2);
    }
    .modal h2 {
      margin-bottom: 20px;
      color: var(--primary);
    }
    .form-group {
      margin-bottom: 16px;
    }
    .form-group label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
    }
    .form-group input {
      width: 100%;
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 10px;
      font-size: 1rem;
    }
    .form-group input:focus {
      border-color: var(--accent);
      outline: none;
    }
    .btn {
      background: var(--accent);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 10px;
      font-size: 1.1rem;
      cursor: pointer;
      width: 100%;
      font-weight: bold;
    }
    .btn:hover {
      background: #e03a7f;
    }
    .close {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 24px;
      cursor: pointer;
      color: #999;
    }
    .success {
      text-align: center;
      color: #2e7d32;
      font-weight: bold;
      margin-top: 10px;
    }
  </style>
</head>
<body>

  <header>
    <h1>üî• –ú–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å—ã –¥–ª—è –º–æ–ª–æ–¥—ë–∂–∏</h1>
    <p class="subtitle">–í—ã–±–µ—Ä–∏ —Ç–æ, —á—Ç–æ —Ç–µ–±–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ ‚Äî –∏ –∑–∞–ø–∏—à–∏—Å—å –≤—Å–µ–≥–æ –∑–∞ 2 –∫–ª–∏–∫–∞!</p>
  </header>

  <div class="grid" id="masterclasses"></div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <h2 id="modal-title">–ó–∞–ø–∏—Å—å –Ω–∞ –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å</h2>
      <form id="registerForm">
        <input type="hidden" id="mkId" />
        <input type="hidden" id="mkDate" />
        <input type="hidden" id="mkTime" />
        <div class="form-group">
          <label>–§.–ò.–û.</label>
          <input type="text" id="fullName" required />
        </div>
        <div class="form-group">
          <label>–¢–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ email</label>
          <input type="text" id="contact" required />
        </div>
        <button type="submit" class="btn">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</button>
      </form>
      <div id="result"></div>
    </div>
  </div>

  <script>
    // === –î–∞–Ω–Ω—ã–µ –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å–æ–≤ (–≤ –∏–¥–µ–∞–ª–µ –∏—Ö –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å —á–µ—Ä–µ–∑ API,
    // –Ω–æ –¥–ª—è GitHub Pages –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞ ‚Äî –≤—à–∏—Ç—ã –ø—Ä—è–º–æ –≤ –∫–æ–¥) ===
    const masterclasses = [
      {
        id: 1,
        date: "2025-12-10",
        time: "18:00 - 20:00",
        title: "–°–æ–∑–¥–∞–π —Å–≤–æ–π –ø–µ—Ä–≤—ã–π —Å–∞–π—Ç –∑–∞ 2 —á–∞—Å–∞",
        desc: "–ù–∞—É—á–∏—Ç–µ—Å—å –æ—Å–Ω–æ–≤–∞–º HTML –∏ CSS. –°–¥–µ–ª–∞–π—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é –≤–∏–∑–∏—Ç–∫—É –∏ –æ–ø—É–±–ª–∏–∫—É–π—Ç–µ –µ—ë –±–µ—Å–ø–ª–∞—Ç–Ω–æ –Ω–∞ GitHub Pages."
      },
      {
        id: 2,
        date: "2025-12-12",
        time: "17:00 - 19:00",
        title: "–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–π —Å–≤–æ—é –∂–∏–∑–Ω—å: –±–æ—Ç—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã",
        desc: "–°–æ–∑–¥–∞–π—Ç–µ Telegram-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–∏—Å—ã–ª–∞—Ç—å –≤–∞–º –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏–ª–∏ –∫—É—Ä—Å –≤–∞–ª—é—Ç. –ë–µ–∑ –∫–æ–¥–∞ –∏ —Å –Ω–∏–º."
      },
      {
        id: 3,
        date: "2025-12-15",
        time: "16:00 - 18:00",
        title: "–ò–≥—Ä–∞ –Ω–∞ Python: —Å–¥–µ–ª–∞–π —Å–≤–æ—é –ø–µ—Ä–≤—É—é –∏–≥—Ä—É",
        desc: "–û—Å–≤–æ–π—Ç–µ –æ—Å–Ω–æ–≤—ã Python, —Å–æ–∑–¥–∞–≤ –ø—Ä–æ—Å—Ç—É—é 2D-–∏–≥—Ä—É. –£–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º, —Å–æ–±–∏—Ä–∞–π—Ç–µ –æ—á–∫–∏ –∏ –ø–æ–±–µ–∂–¥–∞–π—Ç–µ –º–µ—Ç–µ–æ—Ä–∏—Ç—ã!"
      },
      {
        id: 4,
        date: "2025-12-18",
        time: "19:00 - 21:00",
        title: "–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –¥–ª—è –≤—Å–µ—Ö",
        desc: "–ü–æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –ò–ò –±–µ–∑ —Å–ª–æ–∂–Ω–æ–π –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏. –°–æ–∑–¥–∞–π—Ç–µ —á–∞—Ç-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã."
      },
      {
        id: 5,
        date: "2025-12-20",
        time: "15:00 - 17:00",
        title: "–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–µ–∑ Android Studio",
        desc: "–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—ë –ø–µ—Ä–≤–æ–µ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é no-code –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã Glide –∏–ª–∏ Thunkable."
      }
    ];

    // === –í—Å—Ç–∞–≤—å—Ç–µ –°–Æ–î–ê –≤–∞—à Google Apps Script URL ===
    const WEBHOOK_URL = "https://script.google.com/macros/library/d/1toUgjaVq0EjLXHOOH4slQtqnyayScFHPCbvB_PuEIFaMu8cX_qMxrWrr/4";

    // === –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏ ===
    const container = document.getElementById("masterclasses");
    masterclasses.forEach(mk => {
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <h3>${mk.title}</h3>
        <div class="date-time">${mk.date} ¬∑ ${mk.time}</div>
        <p>${mk.desc}</p>
      `;
      card.onclick = () => openModal(mk);
      container.appendChild(card);
    });

    // === –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ ===
    function openModal(mk) {
      document.getElementById("modal-title").textContent = `–ó–∞–ø–∏—Å—å: ${mk.title}`;
      document.getElementById("mkId").value = mk.id;
      document.getElementById("mkDate").value = mk.date;
      document.getElementById("mkTime").value = mk.time;
      document.getElementById("result").textContent = "";
      document.getElementById("registerForm").reset();
      document.getElementById("modal").style.display = "flex";
    }

    function closeModal() {
      document.getElementById("modal").style.display = "none";
    }

    // === –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö ===
    document.getElementById("registerForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const mkId = document.getElementById("mkId").value;
      const date = document.getElementById("mkDate").value;
      const time = document.getElementById("mkTime").value;
      const fullName = document.getElementById("fullName").value;
      const contact = document.getElementById("contact").value;

      const payload = {
        action: "register",
        masterclassId: mkId,
        date: date,
        fullName: fullName,
        contact: contact,
        time: time
      };

      try {
        const response = await fetch(WEBHOOK_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });

        const resultDiv = document.getElementById("result");
        if (response.ok) {
          resultDiv.innerHTML = '<div class="success">‚úÖ –£—Å–ø–µ—à–Ω–æ! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏.</div>';
          setTimeout(closeModal, 2000);
        } else {
          resultDiv.innerHTML = '<div class="success" style="color:red;">‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.</div>';
        }
      } catch (err) {
        document.getElementById("result").innerHTML = '<div style="color:red;">‚ùå –ù–µ—Ç —Å–≤—è–∑–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º.</div>';
      }
    });

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –æ–∫–Ω–∞
    window.onclick = (e) => {
      if (e.target === document.getElementById("modal")) closeModal();
    };
  </script>
</body>
</html>
